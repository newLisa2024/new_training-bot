import telebot
from telebot import types
import telebot
from Backend import *
from db import *
from Backend import *


from datetime import datetime



start_message = (
    '–ü—Ä–∏–≤–µ—Ç! üëã\n'
    '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞-—Ç—Ä–µ–Ω–∞–∂–µ—Ä–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é –ø–æ Python!\n\n'
    '–ó–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å:\n'
    'üìù –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è.\n'
    'üìà –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å–≤–æ–∏–º –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ —É–ª—É—á—à–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.\n'
    'ü§ñ –ü–æ–ª—É—á–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π —Ñ–∏–¥–±—ç–∫ –Ω–∞ —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã.'
)
help_message = '–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.'

# –°–ª–æ–≤–∞—Ä—å –∫–Ω–æ–ø–æ–∫
buttons_dict = {
    'menu': '–ù–∞ –≥–ª–∞–≤–Ω—É—é ‚Ü≤',
    #'menu': '‚Ü∫ ‚Ü¥ ‚§¥ ‚áó ‚Üó',
    'statistics': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ üìà',
    'test_mode': '‚ùì –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
    'back': '–ù–∞–∑–∞–¥',
    'start_test': '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç',
    'all_questions': '–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã',
    'choose_topic': '–í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É',
    'see_answer_all': '–£–∑–Ω–∞—Ç—å –æ—Ç–≤–µ—ÇüëÄ',
    'next_question_all': '‚ùì –°–ª–µ–¥—É—é—â–∏–π',
    'detailed_statistics':'üìë –ü–æ–¥—Ä–æ–±–Ω—ã–π',

    #'left': "‚¨ÖÔ∏è",
    #'right': "‚û°Ô∏è",
    'left': "‚üµ",
    'right': "‚ü∂",
    #'left': '‚¨Ö',
    #'left': '‚óÄ',
    #'right': '‚ñ∂',
    #'left': '‚¨Ö',
    #"right": "‚áê",
    'text_report': 'üìë –¢–µ–∫—Å—Ç–æ–≤—ã–π',
    'graph_report': '–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π üìà',
    'skip_question_all': '‚ùå –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å',


    'repeat_topic': '‚Ü∫ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ–º—É'
}

def add_topic_buttons(buttons_dict, list_of_topics):
    for idx, topic in enumerate(list_of_topics):
        button_key = f'topic_{idx}'
        buttons_dict[button_key] = topic


def create_see_answer_button(topic_index):
    return (f'see_answer_{topic_index}', 'üëÄ –û—Ç–≤–µ—Ç')



# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–ø—É—Å–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ
def create_skip_question_button(topic_index):
    return (f'skip_question_{topic_index}', '‚ùå –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å')

def create_next_question_button(topic_index):
    return (f'next_question_{topic_index}', '‚ùì –°–ª–µ–¥—É—é—â–∏–π')


#–ø—Ä–∏ –æ—à–∏–±–∫–µ –±–æ—Ç –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É, –∞ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è

#def error_handler(func):
#    def wrapper(*args, **kwargs):
#        try:
#            return func(*args, **kwargs)
#        except Exception as e:
#            print(f"Error in {func.__name__}: {e}")
#            message = kwargs.get('message') or args[0]
#            keyboard = create_inline_keyboard(['test_mode', 'statistics'])
#            bot.send_message(message.chat.id, "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.", reply_markup=keyboard)
#    return wrapper

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã


timer_message = "‚è∞ ‚åõ –ë—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–∞–π–º–µ—Ä –Ω–∞ 2 –º–∏–Ω—É—Ç—ã.–ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –∑–∞—Å—á–∏—Ç–∞–Ω. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å, –∞ —Ç–∞–∫–∂–µ —É–∑–Ω–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç, –Ω–µ –æ—Ç–≤–µ—á–∞—è. –ï—Å–ª–∏ –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, –Ω–∞–∂–º–∏—Ç–µ '–ï—â–µ 2 –º–∏–Ω'\n –û—Ç–≤–µ—Ç –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–∏–±–æ –∑–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º (–≥–æ–≤–æ—Ä–∏—Ç–µ —á–µ—Ç–∫–æ!)"















