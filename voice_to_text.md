
# Документация к Telegram Bot

## Описание модуля
Модуль реализует Telegram бота, который принимает голосовые сообщения от пользователей, преобразует их в текст и отправляет результат обратно пользователю. Бот использует библиотеки `telebot`, `openai` и `subprocess` для выполнения различных задач.

## Импортируемые модули
- `telebot`: основная библиотека для работы с Telegram API.
- `os`: используется для работы с файловой системой.
- `subprocess`: используется для выполнения системных команд.
- `openai`: библиотека для взаимодействия с API OpenAI.

## Основные функции

### `send_welcome(message)`
Метод, обрабатывающий команду `/start`. Отправляет приветственное сообщение пользователю.
- **Параметры**:
  - `message`: Message - сообщение от пользователя.
- **Возвращает**: None.
- **Использует**: `bot.reply_to` для отправки приветственного сообщения.

### `handle_voice(message)`
Метод для обработки голосовых сообщений. Выполняет следующие действия:
1. Скачивает голосовое сообщение.
2. Сохраняет его во временный файл формата `.ogg`.
3. Преобразует файл из формата `.ogg` в `.mp3` с использованием `ffmpeg`.
4. Загружает mp3 файл в OpenAI для транскрипции.
5. Отправляет транскрибированный текст пользователю.
6. Удаляет временные файлы.
- **Параметры**:
  - `message`: Message - сообщение от пользователя.
- **Возвращает**: None.
- **Использует**:
  - `bot.get_file` и `bot.download_file` для скачивания голосового сообщения.
  - `subprocess.run` для преобразования аудиофайла.
  - `openai.Client` для транскрипции аудио.
  - `bot.reply_to` для отправки транскрибированного текста пользователю.
- **Исключения**:
  - Обрабатывает исключения при скачивании, преобразовании и транскрипции аудиофайлов. Отправляет сообщение об ошибке пользователю и логирует ошибку в консоль.

## Обработчики команд

### `handle_start(message)`
Метод, обрабатывающий команду `/start`. Отправляет приветственное сообщение пользователю с инструкцией отправить голосовое сообщение для транскрипции.
- **Параметры**:
  - `message`: Message - сообщение от пользователя.
- **Возвращает**: None.
- **Использует**: `bot.reply_to` для отправки приветственного сообщения.

## Запуск бота
Бот запущен в режиме long polling с использованием `bot.polling(none_stop=True)` для непрерывной обработки сообщений.
